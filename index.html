<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Playground with Monaco Editor</title>
    <style>
        body { display: flex; margin: 0; }
        .wrapper { width: 50%; height: 100vh; }
        .container1, .container2, .container3 { height: 200px}
        .container1::before {
            content: 'html';
        }
        .container2::before {
            content: 'js';
        }
        .container3::before {
            content: 'css';
        }
        .container2, .container3 {
            margin: 1.5rem 0;
        }
        .preview { width: 50%; height: calc(630px + 3rem); }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="container1"></div>
        <div class="container2"></div>
        <div class="container3"></div>
    </div>
    <iframe class="preview"></iframe>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.0/min/vs/loader.min.js"></script>
    <script type="text/javascript">
        var iframe = document.querySelector('.preview');
        var editor1, editor2, editor3;
        require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.0/min/vs' } });
        require(['vs/editor/editor.main'], function () {
            editor1 = monaco.editor.create(document.querySelector('.container1'), {
                value: '<h1>hi</h1>',
                language: 'html',
                theme: 'vs-dark'
            });
            editor2 = monaco.editor.create(document.querySelector('.container2'), {
                value: 'console.log("hi")',
                language: 'javascript',
                theme: 'vs-dark'
            });
            editor3 = monaco.editor.create(document.querySelector('.container3'), {
                value: 'h1 {font-size: 2rem}',
                language: 'css',
                theme: 'vs-dark'
            });

            var onchange = () => {
                var html = editor1.getValue();
                var js = editor2.getValue();
                var css = editor3.getValue();
                iframe.src = 'data:text/html;charset=utf-8,' + encodeURIComponent("<html><style>"+css+"<\/style>"+ html + "<script>" + js + "<\/script><\/html>");
            };
            editor1.onDidChangeModelContent = onchange;
            editor2.onDidChangeModelContent = onchange;
            editor3.onDidChangeModelContent = onchange;
            window.addEventListener('resize', () => {
                editor1.layout();
                editor2.layout();
                editor3.layout();
            });
        });
    </script>
</body>
</html>
